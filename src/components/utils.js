const rhythmSample = {
  _comment: 'Algorithm Version',
  ALGORITHM_VERSION: {
    _text: 'v.2.0.7',
  },
  BUCKET: {
    _text: '2',
  },
  NOISE: {
    _text: '0',
  },
  COMPLETE_CONFIDENCE_INDEX: {
    _text: '87%',
  },
  NUMBER_OF_EVENTS: {
    _text: '23',
  },
  EVENT: [
    {
      EVENT_NUMBER: {
        _text: '1',
      },
      EVENT_TIME: {
        _text: '0:00:00.000',
      },
      SAMPLE_NUMBER: {
        _text: '1',
      },
      DESCRIPTION_FULL: {
        _text: 'UNCLASSIFIED RHYTHM',
      },
      DESCRIPTION_SHORT: {
        _text: 'Unclassified rhythm',
      },
      CONFIDENCE_INDEX: {
        _text: '75%',
      },
      CODE: {
        _text: '29',
      },
      N_N_BEATS: {
        _text: '4',
      },
      N_V_BEATS: {
        _text: '2',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '2',
      },
      DURATION: {
        _text: '4.420',
      },
      N_BEATS: {
        _text: '8',
      },
      MEASUREMENTS: {
        HR_AVER: {
          _text: '71',
        },
        HR_MAX: {
          _text: '71',
        },
        HR_MIN: {
          _text: '71',
        },
        QRS_AVER: {
          _text: '152',
        },
        PR_AVER: {
          _text: '36',
        },
        QT_AVER: {
          _text: '400',
        },
        QTc_AVER: {
          _text: '436',
        },
        QTcF_AVER: {
          _text: '424',
        },
        ST_AVER: {
          _text: '-77',
        },
      },
    },
    {
      EVENT_NUMBER: {
        _text: '2',
      },
      EVENT_TIME: {
        _text: '0:00:00.360',
      },
      SAMPLE_NUMBER: {
        _text: '91',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '3',
      },
      EVENT_TIME: {
        _text: '0:00:02.928',
      },
      SAMPLE_NUMBER: {
        _text: '733',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '4',
      },
      EVENT_TIME: {
        _text: '0:00:04.420',
      },
      SAMPLE_NUMBER: {
        _text: '1106',
      },
      DESCRIPTION_FULL: {
        _text: 'NSR + IVCD',
      },
      DESCRIPTION_SHORT: {
        _text: 'NSR+IVCD',
      },
      CONFIDENCE_INDEX: {
        _text: '92%',
      },
      CODE: {
        _text: '4',
      },
      N_N_BEATS: {
        _text: '41',
      },
      N_V_BEATS: {
        _text: '11',
      },
      N_S_BEATS: {
        _text: '2',
      },
      N_Q_BEATS: {
        _text: '5',
      },
      DURATION: {
        _text: '39.296',
      },
      N_BEATS: {
        _text: '59',
      },
      MEASUREMENTS: {
        HR_AVER: {
          _text: '70',
        },
        HR_MAX: {
          _text: '75',
        },
        HR_MIN: {
          _text: '66',
        },
        QRS_AVER: {
          _text: '152',
        },
        PR_AVER: {
          _text: '36',
        },
        QT_AVER: {
          _text: '400',
        },
        QTc_AVER: {
          _text: '433',
        },
        QTcF_AVER: {
          _text: '422',
        },
        ST_AVER: {
          _text: '-70',
        },
      },
    },
    {
      EVENT_NUMBER: {
        _text: '5',
      },
      EVENT_TIME: {
        _text: '0:00:08.472',
      },
      SAMPLE_NUMBER: {
        _text: '2119',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '6',
      },
      EVENT_TIME: {
        _text: '0:00:08.696',
      },
      SAMPLE_NUMBER: {
        _text: '2175',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE SUPRAVENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'SVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '7',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '0',
      },
      N_S_BEATS: {
        _text: '1',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '7',
      },
      EVENT_TIME: {
        _text: '0:00:10.196',
      },
      SAMPLE_NUMBER: {
        _text: '2550',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '8',
      },
      EVENT_TIME: {
        _text: '0:00:10.380',
      },
      SAMPLE_NUMBER: {
        _text: '2596',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE SUPRAVENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'SVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '7',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '0',
      },
      N_S_BEATS: {
        _text: '1',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '9',
      },
      EVENT_TIME: {
        _text: '0:00:10.712',
      },
      SAMPLE_NUMBER: {
        _text: '2679',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '10',
      },
      EVENT_TIME: {
        _text: '0:00:12.364',
      },
      SAMPLE_NUMBER: {
        _text: '3092',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '11',
      },
      EVENT_TIME: {
        _text: '0:00:14.860',
      },
      SAMPLE_NUMBER: {
        _text: '3716',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '12',
      },
      EVENT_TIME: {
        _text: '0:00:16.780',
      },
      SAMPLE_NUMBER: {
        _text: '4196',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '13',
      },
      EVENT_TIME: {
        _text: '0:00:20.224',
      },
      SAMPLE_NUMBER: {
        _text: '5057',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '14',
      },
      EVENT_TIME: {
        _text: '0:00:26.820',
      },
      SAMPLE_NUMBER: {
        _text: '6706',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '15',
      },
      EVENT_TIME: {
        _text: '0:00:33.460',
      },
      SAMPLE_NUMBER: {
        _text: '8366',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '16',
      },
      EVENT_TIME: {
        _text: '0:00:37.768',
      },
      SAMPLE_NUMBER: {
        _text: '9443',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '17',
      },
      EVENT_TIME: {
        _text: '0:00:40.412',
      },
      SAMPLE_NUMBER: {
        _text: '10104',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '18',
      },
      EVENT_TIME: {
        _text: '0:00:43.980',
      },
      SAMPLE_NUMBER: {
        _text: '10996',
      },
      DESCRIPTION_FULL: {
        _text: 'VENTRICULAR COUPLET',
      },
      DESCRIPTION_SHORT: {
        _text: 'VCoup',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '20',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '2',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
      DURATION: {
        _text: '1.484',
      },
      N_BEATS: {
        _text: '2',
      },
      MEASUREMENTS: {
        HR_AVER: {
          _text: '67',
        },
        HR_MAX: {
          _text: '67',
        },
        HR_MIN: {
          _text: '67',
        },
        QRS_AVER: {
          _text: '172',
        },
        PR_AVER: {
          _text: '0',
        },
        QT_AVER: {
          _text: '0',
        },
        QTc_AVER: {
          _text: '0',
        },
        QTcF_AVER: {
          _text: '0',
        },
        ST_AVER: {
          _text: '0',
        },
      },
    },
    {
      EVENT_NUMBER: {
        _text: '19',
      },
      EVENT_TIME: {
        _text: '0:00:45.464',
      },
      SAMPLE_NUMBER: {
        _text: '11367',
      },
      DESCRIPTION_FULL: {
        _text: 'NSR + IVCD',
      },
      DESCRIPTION_SHORT: {
        _text: 'NSR+IVCD',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '4',
      },
      N_N_BEATS: {
        _text: '18',
      },
      N_V_BEATS: {
        _text: '4',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
      DURATION: {
        _text: '16.776',
      },
      N_BEATS: {
        _text: '22',
      },
      MEASUREMENTS: {
        HR_AVER: {
          _text: '69',
        },
        HR_MAX: {
          _text: '73',
        },
        HR_MIN: {
          _text: '66',
        },
        QRS_AVER: {
          _text: '152',
        },
        PR_AVER: {
          _text: '36',
        },
        QT_AVER: {
          _text: '400',
        },
        QTc_AVER: {
          _text: '428',
        },
        QTcF_AVER: {
          _text: '419',
        },
        ST_AVER: {
          _text: '-67',
        },
      },
    },
    {
      EVENT_NUMBER: {
        _text: '20',
      },
      EVENT_TIME: {
        _text: '0:00:45.716',
      },
      SAMPLE_NUMBER: {
        _text: '11430',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '21',
      },
      EVENT_TIME: {
        _text: '0:00:48.392',
      },
      SAMPLE_NUMBER: {
        _text: '12099',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '22',
      },
      EVENT_TIME: {
        _text: '0:00:51.888',
      },
      SAMPLE_NUMBER: {
        _text: '12973',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
    {
      EVENT_NUMBER: {
        _text: '23',
      },
      EVENT_TIME: {
        _text: '0:00:54.540',
      },
      SAMPLE_NUMBER: {
        _text: '13636',
      },
      DESCRIPTION_FULL: {
        _text: 'PREMATURE VENTRICULAR CONTRACTION',
      },
      DESCRIPTION_SHORT: {
        _text: 'PVC',
      },
      CONFIDENCE_INDEX: {
        _text: '100%',
      },
      CODE: {
        _text: '19',
      },
      N_N_BEATS: {
        _text: '0',
      },
      N_V_BEATS: {
        _text: '1',
      },
      N_S_BEATS: {
        _text: '0',
      },
      N_Q_BEATS: {
        _text: '0',
      },
    },
  ],
  timeStamp: 1555171154000,
};


const rhythmSample2 = {
  "_comment": "Algorithm Version",
  "ALGORITHM_VERSION": {
    "_text": "v.2.0.7"
  },
  "BUCKET": {
    "_text": "4"
  },
  "NOISE": {
    "_text": "0"
  },
  "COMPLETE_CONFIDENCE_INDEX": {
    "_text": "100%"
  },
  "NUMBER_OF_EVENTS": {
    "_text": "1"
  },
  "EVENT": {
    "EVENT_NUMBER": {
      "_text": "1"
    },
    "EVENT_TIME": {
      "_text": "0:00:00.000"
    },
    "SAMPLE_NUMBER": {
      "_text": "1"
    },
    "DESCRIPTION_FULL": {
      "_text": "SINUS RHYTHM"
    },
    "DESCRIPTION_SHORT": {
      "_text": "NSR"
    },
    "CONFIDENCE_INDEX": {
      "_text": "100%"
    },
    "CODE": {
      "_text": "1"
    },
    "N_N_BEATS": {
      "_text": "211"
    },
    "N_V_BEATS": {
      "_text": "0"
    },
    "N_S_BEATS": {
      "_text": "0"
    },
    "N_Q_BEATS": {
      "_text": "0"
    },
    "DURATION": {
      "_text": "180.080"
    },
    "N_BEATS": {
      "_text": "211"
    },
    "MEASUREMENTS": {
      "HR_AVER": {
        "_text": "71"
      },
      "HR_MAX": {
        "_text": "78"
      },
      "HR_MIN": {
        "_text": "54"
      },
      "QRS_AVER": {
        "_text": "116"
      },
      "PR_AVER": {
        "_text": "148"
      },
      "QT_AVER": {
        "_text": "376"
      },
      "QTc_AVER": {
        "_text": "408"
      },
      "QTcF_AVER": {
        "_text": "397"
      },
      "ST_AVER": {
        "_text": "10"
      }
    }
  },
  timeStamp: 1555171154000,
}

// Helper function, to calculate the actual event time in UTC
const calcEventUtc = (timeStamp, eventTimeString) => {
  const datetime = new Date('1970-01-01T' + '0' + eventTimeString);
  const mSec = datetime.getMilliseconds();
  return timeStamp + Date.parse(datetime) + mSec;
};

// returns an array of event obj with just name and UTC
export const mapRhythmData = rhythmData => {
  let events = [];

  if (Array.isArray(rhythmData.EVENT)) {
    events = rhythmData.EVENT.map(event => {
      return {
        descriptionFull: event.DESCRIPTION_FULL._text,
        eventUtc: calcEventUtc(rhythmData.timeStamp, event.EVENT_TIME._text),
      };
    });
  } else if (typeof rhythmData.EVENT === 'object') {
    events.push({
      descriptionFull: rhythmData.EVENT.DESCRIPTION_FULL._text,
      eventUtc: calcEventUtc(rhythmData.timeStamp, rhythmData.EVENT.EVENT_TIME._text),
    });
  }
  return events;
};

// console.log(mapRhythmData(rhythmSample2));
// console.log(calcEventUtc(rhythmSample.timeStamp, rhythmSample.EVENT[2].EVENT_TIME._text));
